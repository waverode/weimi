
<!doctype html>
<html  lang="en">

    <head>
        <!-- meta data -->
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

        <!--font-family-->
		<!-- <link href="https://fonts.googleapis.com/css?family=Poppins:100,200,300,400,500,600,700,800,900&amp;subset=devanagari,latin-ext" rel="stylesheet"> -->
        
        <!-- title of site -->
        <title>注册微米</title>

        <!-- 网页图标 -->
		<link rel="shortcut icon" type="image/icon" href="img/wm-icon.jpg"/>
       
        <!--font-awesome.min.css-->
        <link rel="stylesheet" href="css/assets/font-awesome.min.css">
		<link rel="stylesheet" href="css/headstyle.css">
		<link href="css/bootstrap.css" rel="stylesheet">
        <link href="css/scaffolding.css" rel="stylesheet">
        <link href="css/headstyle.css" rel="stylesheet" >
		
		<!--animate.css-->
        <link rel="stylesheet" href="css/assets/animate.css">
		
        <!--bootstrap.min.css-->
        <link rel="stylesheet" href="css/assets/bootstrap.min.css">
		
		<!-- bootsnav -->
		<link rel="stylesheet" href="css/assets/bootsnav.css" >	
        
        <!--style.css-->
        <link rel="stylesheet" href="css/assets/style.css">
        
        <!--responsive.css-->
        <link rel="stylesheet" href="css/assets/responsive.css">
        
        <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
		
        <!--[if lt IE 9]>
			<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
			<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->
		
		<style>
		.wm-gray{
			background-color: #504f4d;
		}
		.wm-main{
			background-image: url(./img/regis_backgroud.jpg);
		}
		.input{
			text-transform: none;
		}
		@media screen and (max-width:768px){
           
		}
		.alert-info{
			background-color:transparent
		}
	
		</style>
    </head>
	
	<body>
		<!--[if lte IE 9]>
            <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
        <![endif]-->
		<nav class="navbar navbar-default wm-gray wm-kaiti">
            <div class="container-fluid container">
                <div class="navbar-header">
                    <button type="button" style="background-color:#ffffff;" class="navbar-toggle collapsed wm-white" data-toggle="collapse" data-target="#wm-header-menu" aria-expanded="false">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" style="margin-top: -15px;" href="index.html">
                        <img class="wm-logo-img" src="img/wm-logo.jpg" alt="Brand">
                    </a>
                </div>
                <div class="visible-md visible-sm">
                    <ul class="nav navbar-nav ">
                    <li class="dropdown">
                        <a href="#" style="font-size: 22px;color: #ffffff;" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">商品分类<span class="caret"></span></a>
                        <ul class="dropdown-menu wm-gray">
                          <li><a style="font-size: 18px;color: #ffffff;" href="#">全部商品</a></li>
                          <li role="separator" class="divider"></li>
                          <li><a style="font-size: 18px;color: #ffffff;" href="#">手机</a></li>
                          <li><a style="font-size: 18px;color: #ffffff;" href="#">笔记本</a></li>
                          <li><a style="font-size: 18px;color: #ffffff;" href="#">电视</a></li>
                        </ul>
                      </li>  
                    </ul>
                </div>
                <div class="collapse navbar-collapse" id="wm-header-menu">
                    <ul class="nav navbar-nav visible-lg visible-xs">
                        <li><a style="font-size: 22px;color: #ffffff;" href="#">全部商品</a></li>
                        <li><a style="font-size: 22px;color: #ffffff;" href="#">手机</a></li>
                        <li><a style="font-size: 22px;color: #ffffff;" href="#">电脑</a></li>
                        <li><a style="font-size: 22px;color: #ffffff;" href="#">电视机</a></li>
                      
                    </ul>
                    <ul class="nav navbar-nav navbar-right" id="block1">
                        <li><a style="font-size: 22px;color: #ffffff;" href="signin.html">登录</a></li>
                    </ul>   
                    <form class="navbar-form navbar-right ">
                        <div class="form-group">
                          <input type="text" id="keyword" class="form-control wm-width" placeholder="输入关键字">
                        </div>
                        <button type="button" id="btSearch" class="btn btn-default" style=" font-size: 15px;font-weight: 800;">搜索</button>
                    </form>
                </div >
            </div>
		</nav>
		
		<!-- signin end -->
		<section class="wm-main">
			<div class="container ">
                <div class="row">
					<div class="col-md-5">
						<div class="sign-content ">
							<div class="row">
								<div class="col-sm-12">
									<div class="signin-form">
										<form action="signin.html">
											<div class="form-group">
												<label for="signin_form alert-info">请输入用户名：</label>
												<input type="text" class="form-control" id="uname" placeholder="用户名长度为3-12">
											</div><!--/.form-group -->
											<div class="form-group alert-info">
												<label for="signin_form">请输入密码：</label>
												<input type="password" class="form-control" id="upwd" placeholder="密码长度为6-15">
											</div><!--/.form-group -->
											<div class="form-group">
												<label for="signin_form">请重新输入密码：</label>
												<input type="password" class="form-control" id="rupwd" placeholder="密码长度为6-15">
											</div><!--/.form-group -->
											<div class="form-group">
												<label for="signin_form">请输入邮箱：</label>
												<input type="email" class="form-control" id="email" placeholder="在此输入邮箱">
											</div><!--/.form-group -->
											<div class="form-group">
												<label for="signin_form">请输入手机号：</label>
												<input type="text" class="form-control" id="phone" placeholder="在此输入手机号">
											</div><!--/.form-group -->
										</form><!--/form -->
									</div><!--/.signin-form -->
								</div><!--/.col -->
							</div><!--/.row -->
							
							<div class="row">
								<div class="col-sm-12">
									<div class="signin-footer" >
										<button type="button" id="submit" class="btn signin_btn" style="margin: 0px auto;display: table; max-width: 350px;">
										注册
										</button>
										<p>
											已有账号 ?
											<a style="font-weight: 800;" href="signin.html">立即登录</a>
										</p>
									</div><!--/.signin-footer -->
								</div><!--/.col-->
							</div><!--/.row -->
		
						</div><!--/.sign-content -->
					</div>
				</div>
				

				
			</div><!--/.container -->
           
		</section><!--/.signin -->
		 <!--图标条-->
		 <div class="wm-iconbar">
            <div class="container">
                <div class="row" style="margin-top: 30px;"> 
                    <div class="col-xs-12 col-sm-6 col-md-3">
                        <img class="wm-icon" src='img/icon1.png' alt="">
                        <a>预约维修服务</a>
                    </div>
                    <div class="col-xs-12 col-sm-6 col-md-3">
                        <img class="wm-icon" src='img/icon2.png' alt="">
                        <a>7天无理由退货</a>
                    </div>
                    <div class="col-xs-12 col-sm-6 col-md-3">
                        <img class="wm-icon" src='img/icon3.png' alt="">
                        <a>15天免费换货</a>
                    </div>
                    <div class="col-xs-12 col-sm-6 col-md-3">
                        <img class="wm-icon" src='img/icon4.png' alt="">
                        <a>满150元包邮</a>
                    </div>
                </div>
            </div>
            <div class="wm-border"></div>
        </div>
        <!--页尾-->
        <div class="wm-footer wm-kaiti"  style="background-color: #f5f5f5;">
            <div class="container">
                <div class="row" style="margin-top: 10px;">
                        <div class="col-xs-6 col-sm-4 col-md-2">
                            <h5><strong>帮助中心</strong></h5>
                            <div class="wm-blank1"></div>
                            <ul > 
                                <li><a style="font-size: 13px;" href="#">账户管理</a></li>
                                <li><a style="font-size: 13px;" href="#">购物指南</a></li>
                                <li><a style="font-size: 13px;" href="#">订单操作</a></li>
                            </ul>
                        </div>
                        <div class="col-xs-6 col-sm-4 col-md-2">
                            <h5><strong>服务支持</strong></h5>
                            <div class="wm-blank1"></div>
                            <ul>
                                <li><a style="font-size: 13px;" href="#">售后政策</a></li>
                                <li><a style="font-size: 13px;" href="#">自助服务</a></li>
                                <li><a style="font-size: 13px;" href="#">相关下载</a></li>
                            </ul>
                        </div>
                        <div class="col-xs-6 col-sm-4 col-md-2">
                            <h5><strong>线下门店</strong></h5>
                            <div class="wm-blank1"></div>
                            <ul>
                                <li><a style="font-size: 13px;" href="#">小米之家</a></li>
                                <li><a style="font-size: 13px;" href="#">服务网点</a></li>
                                <li><a style="font-size: 13px;" href="#">授权体验店</a></li>
                            </ul>
                        </div>
                        <div class="col-xs-6 col-sm-4 col-md-2">
                            <h5><strong>关于小米</strong></h5>
                            <div class="wm-blank1"></div>
                            <ul>
                                <li><a style="font-size: 13px;" href="#">了解小米</a></li>
                                <li><a style="font-size: 13px;" href="#">加入小米</a></li>
                                <li><a style="font-size: 13px;" href="#">投资者关系</a></li>
                            </ul>
                        </div>
                        <div class="col-xs-6 col-sm-4 col-md-2">
                            <h5><strong>关于我们</strong></h5>
                            <div class="wm-blank1"></div>
                            <ul>
                                <li><a style="font-size: 13px;" href="#">新浪微博</a></li>
                                <li><a style="font-size: 13px;" href="#">官方微信</a></li>
                                <li><a style="font-size: 13px;" href="#">联系我们</a></li>
                            </ul>
                        </div>
                        <div class="col-xs-6 col-sm-4 col-md-2">
                            <h5><strong>特色服务</strong></h5>
                            <div class="wm-blank1"></div>
                            <ul>
                                <li><a style="font-size: 13px;" href="#">F码通道</a></li>
                                <li><a style="font-size: 13px;" href="#">礼物码</a></li>
                                <li><a style="font-size: 13px;" href="#">防伪查询</a></li>
                            </ul>
                        </div>
                </div>
                <div class="wm-blank"></div>
                <div class="row">
                    <img class="center-block" src="img/slogan2016.png" alt="">
                </div>
            </div>
        </div>
		<!-- signin end -->



		 <!-- Include all js compiled plugins (below), or include individual files as needed -->

		<script src="js/assets/jquery.js"></script>
        
        <!--modernizr.min.js-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>
		
		<!--bootstrap.min.js-->
        <script src="js/assets/bootstrap.min.js"></script>
		
		<!-- bootsnav js -->
		<script src="js/assets/bootsnav.js"></script>
		
		<!-- jquery.sticky.js -->
		<script src="js/assets/jquery.sticky.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js"></script>
		
        
        <!--Custom JS-->
        <script src="js/assets/custom.js"></script>
		<script>
			 /*监听输入框失去焦点*/
    // 用户框失去焦点
    $('#uname').blur(function(){
        let uname = $(this).val()
        if(uname.length<3){
          $('#unameMsg').html('用户名长度太短了').removeClass('alert-info').addClass('alert-danger')
        }
        else if(uname.length>12){
          $('#unameMsg').html('用户名长度太长了').removeClass('alert-info').addClass('alert-danger')
        }
        else{
          $('#unameMsg').html('用户名长度合法').removeClass('alert-danger').addClass('alert-info')
        }
    })
			/* 为btRegister注册按钮添加事件监听*/
			//页面加载完成，异步请求服务器端动态数据
			$(window).load(function(){
				   $.ajax({
					  xhrFields:{withCredentials:true}
				   })
				   $('#btBackLogin').click(function(){
					 location.href='signin.html'
				   })
				   $('#btBackRegister').click(function(){
                  location.href='signup.html'
                })
			   })
			$('#submit').click(function(){
			 
			  //读取所有的表单输入
			  let uname= $('#uname').val()
			  let upwd= $('#upwd').val()
			  let rupwd= $('#rupwd').val()
			  let email= $('#email').val()
			  let phone= $('#phone').val()
			  console.log(uname,upwd,email,phone)
			 
			  //异步提交用户的输入给后台API
			  $.ajax({
				method: 'POST',
				url: 'http://127.0.0.1:5050/user/register',
				xhrFields: {withCredentials: true}, 
					   crossDomain: true,
				data: `uname=${uname}&upwd=${upwd}&rupwd=${rupwd}&email=${email}&phone=${phone}`,
				success:function(data,msg,xhr){
					console.log('异步请求注册API成功',data)
					if(data.code==200){
					  //alert('注册成功')
					  $('#modalRegisterSucc').modal()
					}else{
					 // alert('注册失败！服务器放回错误消息'+data.msg)    //输入的字符不符合要求，不是请求失败
					 $('#errMsg').html(data.msg)
					 $('#modalRegisterErr').modal()
					}
				},
				error:function(xhr,err){
				  console.log('异步请求注册API失败')
					console.log(xhr)
					console.log(err)
				}
			  })
			})
			$('#btSearch').click(function(){
             let word = $('#keyword').val()
             location.href='search.html?search='+word
             
        })
			</script>
			<!-- modal part start -->
			<div id="modalRegisterSucc" class="modal fade signin_modal" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel">
				<div class="modal-dialog modal-lg" role="document">
					<div class="modal-content" style="width: 400px; height: 250px;">
						  <div class="sign-content">

							  <div class="modal-header">
								<li style=" text-align: center;"><a style="font-weight: 800; font-size:30px;">注册成功<br></a></li>
								
								<li style=" text-align: center;"><a style="font-size:large;">点击确定立即登录<br><br></a></li>
							</div><!--/.modal-header -->
							
							<div class="modal-body">
								
							   
								<div class="signin-footer">
									<button type="button" id="btBackLogin" style="margin: 0px auto;display: table; max-width: 200px;" class="btn signin_btn" data-toggle="modal" data-target=".signin_modal">
									确定
									</button>
								</div><!--/.signin-footer -->
							</div><!--/.modal-body -->

						</div><!--/.sign-content -->
					</div><!--/.modal-content -->
				</div><!--/.modal-dialog -->
			</div><!--/.modal -->
			<div id="modalRegisterErr" class="modal fade signin_modal" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel">
				<div class="modal-dialog modal-lg" role="document">
					<div class="modal-content" style="width: 400px; height: 300px;">
						  <div class="sign-content">

							  <div class="modal-header">
								<li style=" text-align: center;"><a style="font-weight: 800; font-size:30px;">注册失败<br></a></li>
								
								<li style=" text-align: center;"><a id="errMsg" style="font-size:large;"></a><br><br></li>
							</div><!--/.modal-header -->
							
							<div class="modal-body">
								
							   
								<div class="signin-footer">
									<button type="button" id="btBackRegister" style="margin: 0px auto;display: table; max-width: 200px;" class="btn signin_btn" data-toggle="modal" data-target=".signin_modal">
									返回
									</button>
								</div><!--/.signin-footer -->
							</div><!--/.modal-body -->

						</div><!--/.sign-content -->
					</div><!--/.modal-content -->
				</div><!--/.modal-dialog -->
			</div><!--/.modal -->
    </body>
	
</html>